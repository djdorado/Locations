<!--[* $Id$ *]-->
<!--[gt text="View locations" assign=templatetitle]-->
<!--[include file="locations_user_header.htm"]-->

<table class="z-datatable">
    <thead>
        <tr>
            <th>
                <!--[if $sort eq "name"]-->
                <a href="<!--[pnmodurl modname="locations" type="user" func="view" ot="location" sort="name" sdir=$sdir]-->" style="font-style: italic"><!--[gt text="Name"]--></a>
                <!--[else]-->
                <a href="<!--[pnmodurl modname="locations" type="user" func="view" ot="location" sort="name" sdir="asc"]-->"><!--[gt text="Name"]--></a>
                <!--[/if]-->
            </th>
            <th>
                <!--[if $sort eq "city"]-->
                <a href="<!--[pnmodurl modname="locations" type="user" func="view" ot="location" sort="city" sdir=$sdir]-->" style="font-style: italic"><!--[gt text="City"]--></a>
                <!--[else]-->
                <a href="<!--[pnmodurl modname="locations" type="user" func="view" ot="location" sort="city" sdir="asc"]-->"><!--[gt text="City"]--></a>
                <!--[/if]-->
            </th>
            <th><!--[gt text="Options"]--></th>
        </tr>
    </thead>
    <tbody>
        <!--[foreach from=$objectArray item="location"]-->
        <tr class="<!--[cycle values="z-odd, z-even"]-->">
            <td>
                <a href="<!--[pnmodurl modname="locations" type="user" func="display" ot="location" locationid=$location.locationid]-->"><!--[$location.name|pnmodcallhooks|pnvarprephtmldisplay|default:""]--></a>
            </td>
            <td>
                <a href="<!--[pnmodurl modname="locations" type="user" func="view" ot="location" filter="city:eq:`$location.city`"]-->"><!--[$location.city|pnvarprepfordisplay|default:""]--></a>
            </td>

            <td class="z-nowrap">
                <a href="<!--[pnmodurl modname="locations" type="user" func="display" ot="location" locationid=$location.locationid]-->"><!--[pnimg src="demo.gif" modname="core" set="icons/extrasmall" __alt='Details'  __title='Details' ]--></a>
                <!--[securityutil_checkpermission_block component="locations::" instance=".*" level="ACCESS_ADD"]-->
                <a href="<!--[pnmodurl modname="locations" type="admin" func="edit" ot="location" locationid=$location.locationid]-->"><!--[pnimg src="xedit.gif" modname="core" set="icons/extrasmall" __alt='Edit'  __title='Edit']--></a>
                <!--[/securityutil_checkpermission_block]-->
                <!--[securityutil_checkpermission_block component="locations::" instance=".*" level="ACCESS_DELETE"]-->
                <a href="<!--[pnmodurl modname="locations" type="admin" func="delete" ot="location" locationid=$location.locationid]-->"><!--[pnimg src="14_layer_deletelayer.gif" modname="core" set="icons/extrasmall" __alt='Delete'  __title='Delete']--></a>
                <!--[/securityutil_checkpermission_block]-->
            </td>
        </tr>
        <!--[foreachelse]-->
        <tr class="z-datatableempty"><td colspan="3"><!--[gt text="No locations found."]--></td></tr>
        <!--[/foreach]-->

        <!--[pnvarcleanfrominput name="filter" assign="filter"]-->
        <!--[if $filter]-->
        <tr class="z-datatableempty">
            <td colspan="3"><a href="<!--[pnmodurl modname="locations" type="user" func="main"]-->"><!--[gt text="Show all locations"]--></a></td>
        </tr>
        <!--[/if]-->
    </tbody>
</table>
<!--[pager rowcount=$pager.numitems limit=$pager.itemsperpage]-->

<h3><!--[gt text="Map"]--></h3>
<div class="loc_mapbox z-clearfix">
    <!--[locationsGoogleMapsOverview input=$objectArray width='100%' key=$GoogleMapsAPIKey]-->
</div>

<!--[include file="locations_user_footer.htm"]-->
